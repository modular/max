load("//bazel:api.bzl", "mojo_kgen_lib", "mojo_library")

package(default_visibility = ["//visibility:public"])

mogg_lib_deps = [
    "@mojo//:kv_cache",
    "@mojo//:layout",
    "@mojo//:linalg",
    "@mojo//:nn",
    "//Kernels/mojo/flash_attention3",
    "@mojo//:quantization",
    "//Kernels/mojo/extensibility/tensor_internal",
    "//Kernels/mojo/extensibility/compiler_internal",
    "@mojo//:stdlib",
]

mojo_kgen_lib(
    name = "MOGGKernelAPILib",
    srcs = glob(["**/*.mojo"]),
    deps = mogg_lib_deps + ["//open-source/max/mojo/kernels/src/Mogg/MOGGPrimitives"],
)

mojo_library(
    name = "MOGGKernelAPI",
    srcs = glob(["**/*.mojo"]),
    deps = mogg_lib_deps + ["//open-source/max/mojo/kernels/src/Mogg/MOGGPrimitives"],
)
